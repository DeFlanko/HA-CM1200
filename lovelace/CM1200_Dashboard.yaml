type: sections
max_columns: 4
title: Cable Modem
path: cable-modem
icon: mdi:cable-data
subview: false
sections:
  - type: grid
    cards:
      - type: custom:flex-table-card
        title: CM1200 Downstream Bonded Channels
        entities:
          include: sensor.cm1200_cable_modem_cm1200_ds_channel_*
        columns:
          - data: channel
            name: Channel
          - data: lock_status
            name: Lock Status
          - data: modulation
            name: Modulation
          - data: channel_id
            name: Channel ID
          - data: frequency
            name: Frequency
          - data: power
            name: Power
          - data: snr
            name: SNR
          - data: correctables
            name: correctables
          - data: uncorrectables
            name: Uncorrectables
    column_span: 2
  - type: grid
    cards:
      - type: custom:flex-table-card
        title: CM1200 Upstream Bonded Channels
        entities:
          include: sensor.cm1200_cable_modem_cm1200_us_channel_*
        columns:
          - data: channel
            name: Channel
          - data: lock_status
            name: Lock Status
          - data: us_channel_type
            name: US Channel Type
          - data: channel_id
            name: Channel ID
          - data: symbol_rate
            name: Symbol Rate
          - data: frequency
            name: Frequency
          - data: power
            name: Power
      - type: custom:flex-table-card
        title: CM1200 Downstream OFDM Channels
        entities:
          include: sensor.cm1200_cable_modem_cm1200_ofdm_channel*
        columns:
          - data: channel
            name: Channel
          - data: lock_status
            name: Lock Status
          - data: modulation_/_profile_id
            name: Modulation / Profile ID
          - data: channel_id
            name: Channel ID
          - data: frequency
            name: Frequency
          - data: power
            name: Power
          - data: snr_/_mer
            name: SNR / MER
          - data: active_subcarrier_number_range
            name: Active Subcarrier Number Range
          - data: unerrored_codewords
            name: Unerrored Codewords
          - data: correctable_codewords
            name: Correctable Codewords
          - data: uncorrectable_codewords
            name: Uncorrectable Codewords
      - type: custom:flex-table-card
        title: CM1200 Upstream OFDMA Channels
        entities:
          include: sensor.cm1200_cable_modem_cm1200_ofdma_channel*
        columns:
          - data: channel
            name: Channel
          - data: lock_status
            name: Lock Status
          - data: modulation_/_profile_id
            name: Modulation / Profile ID
          - data: channel_id
            name: Channel ID
          - data: frequency
            name: Frequency
          - data: power
            name: Power
    column_span: 2
  - type: grid
    cards:
      - type: custom:flex-table-card
        title: CM1200 Event Log
        entities:
          include: sensor.cm1200_cable_modem_cm1200_cable_modem_cm1200_event_log
        columns:
          - data: log.time
            name: Time
          - data: log.priority
            name: Priority
            modify: >-
              ( x == 1  || x == "Warning (5)" ? '<div style="color:orange;">' +
              x + '</div>' :""  || x == "Notice (6)" ? '<div
              style="color:cornflowerblue;">' + x + '</div>' :""  || x ==
              "Critical (3)" ? '<div style="color:red;">' + x + '</div>' :""  
              || x == "Error (4)" ? '<div style="color:purple;">' + x + '</div>'
              :"" )
          - data: log.description
            name: Description
        max_rows: 50
        sort_by: time
        desc: true
    column_span: 4
header:
  card:
    type: custom:vertical-stack-in-card
    cards:
      - clock_size: small
        show_seconds: true
        type: clock
      - type: horizontal-stack
        cards:
          - type: custom:flex-table-card
            entities:
              include: sensor.cm1200_cable_modem_cm1200_all_stats
            columns:
              - data: last_updated
                name: Last Updated
                modify: |-
                  if(x.length == 0){"-"} else {
                    var date = new Date(x);
                    (String(date.getMonth()+ 1).padStart(2,'0'))+"/"+
                    date.getDate()+"/"+
                    date.getFullYear()+" "+
                    String(date.getHours()).padStart(2,'0')+":"+
                    String(date.getMinutes()).padStart(2,'0')+":"+
                    date.getSeconds()
                  }
              - data: system_uptime
                name: Uptime
              - data: boot_state, boot_comment, security_comment
                name: Status
              - data: downstream_channel_status, downstream_channel_comment
                name: Acquire Downstream Channel
